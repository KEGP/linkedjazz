@prefix owlunit: <https://w3id.org/OWLunit/ontology/> .
@prefix ex: <.> .
@prefix kejazz: <http://localhost:8080/ontology/kejazz/> .

ex:cq_relationtype.ttl a owlunit:CompetencyQuestionVerification ;
 	owlunit:hasCompetencyQuestion "Who are the related artist to a given one? In what way? In which period of time" ;
 	owlunit:hasSPARQLUnitTest " PREFIX owlunit: <https://w3id.org/OWLunit/ontology/> PREFIX kejazz: <http://localhost:8080/ontology/kejazz/> PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX dul: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT ?sourceName ?relationTypeLabel ?targetArtistName ?date WHERE { BIND (<http://localhost:8080/resource/kejazz/Artist/2e89725a-ac85-414c-b3b2-70f0a82fae9a> as ?artist) . { ?artist kejazz:hasName ?sourceName . ?targetArtist kejazz:hasName ?targetArtistName . ?relation rdf:type kejazz:RelationBetweenArtists ; kejazz:includesSourceArtist ?artist ; kejazz:includesTargetArtist ?targetArtist ; dul:satisfies ?relationType . } UNION { ?targetArtist kejazz:hasName ?sourceName . ?artist kejazz:hasName ?targetArtistName . ?relation rdf:type kejazz:RelationBetweenArtists ; kejazz:includesSourceArtist ?targetArtist ; kejazz:includesTargetArtist ?artist ; dul:satisfies ?relationType . } OPTIONAL { ?relation kejazz:atTime [ kejazz:hasIntervalStartDate ?date ] . } . } " ;
	owlunit:hasInputData <http://localhost:8080/sparql/db/query> ;
	owlunit:hasInputTestDataCategory owlunit:SPARQLendpoint ;
  owlunit:hasExpectedResult "{\"head\": {\"vars\": [\"sourceName\", \"relationTypeLabel\", \"targetArtistName\", \"date\"]}, \"results\": {\"bindings\": [{\"sourceName\": {\"type\": \"literal\", \"value\": \"Teddy Wilson\"}, \"targetArtistName\": {\"type\": \"literal\", \"value\": \"Teddy Wilson and His Orchestra\"}}, {\"sourceName\": {\"type\": \"literal\", \"value\": \"Teddy Wilson\"}, \"targetArtistName\": {\"type\": \"literal\", \"value\": \"The Benny Goodman Sextet\"}, \"date\": {\"type\": \"literal\", \"value\": \"1935\"}}, {\"sourceName\": {\"type\": \"literal\", \"value\": \"Teddy Wilson\"}, \"targetArtistName\": {\"type\": \"literal\", \"value\": \"The Benny Goodman Trio\"}}, {\"sourceName\": {\"type\": \"literal\", \"value\": \"Teddy Wilson\"}, \"targetArtistName\": {\"type\": \"literal\", \"value\": \"The Benny Goodman Sextet\"}, \"date\": {\"type\": \"literal\", \"value\": \"1935\"}}]}}";
  owlunit:testsOntology kejazz: .
